{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.button-load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t  class=\"gallery-image\"\n\t\t  src=\"${webformatURL }\"\n\t\t  alt=\"${tags}\"\n\t\t/>\n\t</a>\n   <div class=\"image-info\">\n        <div class=\"info-item\">\n            <p class=\"info-label\">Likes</p>\n            <p class=\"info-value\">${likes}</p>\n        </div>\n        <div class=\"info-item\">\n            <p class=\"info-label\">Views</p>\n            <p class=\"info-value\">${views}</p>\n        </div>\n        <div class=\"info-item\">\n            <p class=\"info-label\">Comments</p>\n            <p class=\"info-value\">${comments}</p>\n        </div>\n        <div class=\"info-item\">\n            <p class=\"info-label\">Downloads</p>\n            <p class=\"info-value\">${downloads}</p>\n        </div>\n    </div>\n</li>`).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n   loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreButton.classList.add('hidden');\n}","import axios from 'axios';\n\nconst API_KEY = '51602245-fcbe599c3dab331c74561bb82';\nexport const PER_PAGE = 15;\nexport async function getImagesByQuery(query,page=1) {\n  const response = await axios('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    },\n  });\n  return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\n\nlet page = 1;\nlet currentQuery = '';\nconst form = document.querySelector('.form');\nconst loadMoreButton = document.querySelector('.button-load-more');\nhideLoadMoreButton();\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    const query = event.target.elements['search-text'].value.trim();\n    if (query === '') {\n        iziToast.warning({\n            icon: 'ico-error',\n            message: 'Поле пошуку не може бути порожнім.',\n            position: 'topRight',\n        });\n        return;\n    }\n\n  \n    currentQuery = query;\n    page = 1;\n    \n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n    \n    try {\n        const data = await getImagesByQuery(currentQuery, page);\n        const images = data.hits;\n\n        if (images.length === 0) {\n            iziToast.info({\n                icon: 'ico-error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            createGallery(images);\n            if (page < Math.ceil(data.totalHits / PER_PAGE)) {\n                showLoadMoreButton();\n            } else {\n                iziToast.info({\n                    icon: 'Info',\n                    message: 'We are sorry, but you have reached the end of search results.',\n                    position: 'topRight',\n                });\n            }\n        }\n        form.reset();\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            icon: 'ico-error',\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    page++;\n    loadMoreButton.disabled = true;\n    showLoader(); \n    \n    try {\n        const data = await getImagesByQuery(currentQuery, page);\n        const images = data.hits;\n        createGallery(images);\n        const card = document.querySelector('.gallery-item');\n        if (card) {\n            const cardHeight = card.getBoundingClientRect().height;\n            window.scrollBy({\n                left: 0,\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n        if (page < Math.ceil(data.totalHits / PER_PAGE)) {\n            showLoadMoreButton();\n        } else {\n            iziToast.info({\n                icon: 'info',\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topRight',\n            });\n            hideLoadMoreButton();\n        }\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            icon: 'ico-error',\n            message: 'Something went wrong. Please try again!',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n        loadMoreButton.disabled = false;\n    }\n});\n"],"names":["gallery","loader","loadMoreButton","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","API_KEY","PER_PAGE","getImagesByQuery","query","page","axios","currentQuery","form","event","iziToast","data","error","card","cardHeight"],"mappings":"owBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,mBAAmB,EAE3DC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA,iCACzEL,CAAa;AAAA;AAAA;AAAA,WAGnCD,CAAc;AAAA,WACdE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAMqBC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAK;AAAA;AAAA;AAAA;AAAA,oCAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,oCAIRC,CAAS;AAAA;AAAA;AAAA,MAGvC,EAAE,KAAK,EAAE,EAEbd,EAAQ,mBAAmB,YAAaO,CAAM,EAC9CJ,EAAS,QAAO,CAClB,CAEO,SAASY,GAAe,CAC7Bf,EAAQ,UAAY,EACtB,CAEO,SAASgB,GAAa,CAC1Bf,EAAO,UAAU,OAAO,QAAQ,CACnC,CAEO,SAASgB,GAAa,CAC3BhB,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEO,SAASiB,GAAqB,CACnChB,EAAe,UAAU,OAAO,QAAQ,CAC1C,CAEO,SAASiB,GAAqB,CACjCjB,EAAe,UAAU,IAAI,QAAQ,CACzC,CC7DA,MAAMkB,EAAU,qCACHC,EAAW,GACjB,eAAeC,EAAiBC,EAAMC,EAAK,EAAG,CAYnD,OAXiB,MAAMC,EAAM,2BAA4B,CACvD,OAAQ,CACN,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CACX,CACL,CAAG,GACe,IAClB,CCZA,IAAIG,EAAO,EACPE,EAAe,GACnB,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCzB,EAAiB,SAAS,cAAc,mBAAmB,EACjEiB,IACAQ,EAAK,iBAAiB,SAAU,MAAMC,GAAS,CAC3CA,EAAM,eAAc,EACpB,MAAML,EAAQK,EAAM,OAAO,SAAS,aAAa,EAAE,MAAM,OACzD,GAAIL,IAAU,GAAI,CACdM,EAAS,QAAQ,CACb,KAAM,YACN,QAAS,qCACT,SAAU,UACtB,CAAS,EACD,MACH,CAGDH,EAAeH,EACfC,EAAO,EAEPT,IACAI,IACAH,IAEA,GAAI,CACA,MAAMc,EAAO,MAAMR,EAAiBI,EAAcF,CAAI,EAChDlB,EAASwB,EAAK,KAEhBxB,EAAO,SAAW,EAClBuB,EAAS,KAAK,CACV,KAAM,YACN,QAAS,2EACT,SAAU,UAC1B,CAAa,GAEDxB,EAAcC,CAAM,EAChBkB,EAAO,KAAK,KAAKM,EAAK,UAAYT,CAAQ,EAC1CH,IAEAW,EAAS,KAAK,CACV,KAAM,OACN,QAAS,gEACT,SAAU,UAC9B,CAAiB,GAGTF,EAAK,MAAK,CACb,OAAQI,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBF,EAAS,MAAM,CACX,KAAM,YACN,QAAS,0CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNZ,GACH,CACL,CAAC,EAEDf,EAAe,iBAAiB,QAAS,SAAY,CACjDsB,IACAtB,EAAe,SAAW,GAC1Bc,IAEA,GAAI,CACA,MAAMc,EAAO,MAAMR,EAAiBI,EAAcF,CAAI,EAChDlB,EAASwB,EAAK,KACpBzB,EAAcC,CAAM,EACpB,MAAM0B,EAAO,SAAS,cAAc,eAAe,EACnD,GAAIA,EAAM,CACN,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKC,EAAa,EAClB,SAAU,QAC1B,CAAa,CACJ,CACGT,EAAO,KAAK,KAAKM,EAAK,UAAYT,CAAQ,EAC1CH,KAEAW,EAAS,KAAK,CACV,KAAM,OACN,QAAS,gEACT,SAAU,UAC1B,CAAa,EACDV,IAEP,OAAQY,EAAO,CACZ,QAAQ,MAAMA,CAAK,EACnBF,EAAS,MAAM,CACX,KAAM,YACN,QAAS,0CACT,SAAU,UACtB,CAAS,CACT,QAAc,CACNZ,IACAf,EAAe,SAAW,EAC7B,CACL,CAAC"}