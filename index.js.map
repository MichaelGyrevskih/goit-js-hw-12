{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.button-load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `<li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t  class=\"gallery-image\"\n\t\t  src=\"${webformatURL }\"\n\t\t  alt=\"${tags}\"\n\t\t/>\n\t</a>\n   <div class=\"image-info\">\n        <div class=\"info-item\">\n            <p class=\"info-label\">Likes</p>\n            <p class=\"info-value\">${likes}</p>\n        </div>\n        <div class=\"info-item\">\n            <p class=\"info-label\">Views</p>\n            <p class=\"info-value\">${views}</p>\n        </div>\n        <div class=\"info-item\">\n            <p class=\"info-label\">Comments</p>\n            <p class=\"info-value\">${comments}</p>\n        </div>\n        <div class=\"info-item\">\n            <p class=\"info-label\">Downloads</p>\n            <p class=\"info-value\">${downloads}</p>\n        </div>\n    </div>\n</li>`).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n   loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreButton.classList.add('hidden');\n}","import axios from 'axios';\n\nconst API_KEY = '51602245-fcbe599c3dab331c74561bb82';\nexport const PER_PAGE = 15;\nexport async function getImagesByQuery(query,page=1) {\n  const response = await axios('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page,\n     per_page: PER_PAGE,\n    },\n  });\n  return response.data;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api';\n\nlet page = 1;\nconst form = document.querySelector('.form');\nform.addEventListener('submit', async event => {\nevent.preventDefault();\nconst query = event.target.elements['search-text'].value.trim();\nif (query === '') {\n    iziToast.warning({\n      icon: 'ico-error',\n      message: 'Поле пошуку не може бути порожнім.',\n      position: 'topRight',\n    });\n    return;\n    }\n\n   page = 1; \n   clearGallery();\n   hideLoadMoreButton();\n   showLoader();\n    try {\n        const data = await getImagesByQuery(query, page);\n        const images = data.hits;\n\n    if (images.length === 0) {\n      iziToast.info({\n        icon: 'ico-error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n    } else {\n        createGallery(images);\n        if(page < Math.ceil(data.totalHits / PER_PAGE)){\n            showLoadMoreButton();\n        }\n        else {\n            iziToast.info({\n                icon: 'Info',\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topRight',\n              });\n            hideLoadMoreButton();\n        }\n        form.reset();\n    }\n    }catch (error) {\n        console.error(error);\n    }finally {\n        hideLoader();\n    }\n});\n  \n\nconst loadMoreButton = document.querySelector('.button-load-more');\nloadMoreButton.addEventListener('click', async () => {\n    page++;\n    loadMoreButton.disabled = true;\n    const query = form.elements['search-text'].value.trim();\n    try {\n        const data = await getImagesByQuery(query, page);\n        const images = data.hits;\n        createGallery(images);\n        \n        const card = document.querySelector('.gallery-item');\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight*2,\n            behavior: 'smooth',\n        });\n        \n        if(page < Math.ceil(data.totalHits / PER_PAGE)){\n            showLoadMoreButton();\n        }\n        else {\n            iziToast.info({\n                icon: 'info',\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topRight',\n              });\n            hideLoadMoreButton();\n        }\n    } catch (error) {\n        console.error(error);\n    }\n    finally {\n        loadMoreButton.disabled = false;\n    }\n});\n"],"names":["gallery","loader","loadMoreButton","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","API_KEY","PER_PAGE","getImagesByQuery","query","page","axios","form","event","iziToast","data","error","cardHeight"],"mappings":"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"}